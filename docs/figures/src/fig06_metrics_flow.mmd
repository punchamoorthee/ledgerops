%%{init: {"theme":"neutral","themeVariables":{
  "fontFamily":"Inter",
  "primaryColor":"#40826D","primaryBorderColor":"#40826D","primaryTextColor":"#0a0a0a",
  "lineColor":"#40826D","tertiaryColor":"#ffffff"}}}%%
flowchart LR
  A["API Service<br/>/metrics exporter"]
  P[Prometheus]
  G[Grafana]

  subgraph Metrics["Key metrics"]
    M1[["requests_total"]]
    M2[["request_duration_seconds"]]
    M3[["aborts (derived)"]]
    M4[["replays (derived)"]]
  end

  P -- "scrape /metrics" --> A
  A --> M1
  A --> M2
  A -.-> M3
  A -.-> M4
  G -- query --> P

  classDef accent stroke:#40826D,stroke-width:2px,fill:#ffffff,color:#0a0a0a;
  class A,P,G,M1,M2,M3,M4 accent;